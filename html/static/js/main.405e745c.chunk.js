(this["webpackJsonplese-panel"]=this["webpackJsonplese-panel"]||[]).push([[0],{220:function(e,t,n){e.exports=n.p+"static/media/ssl-tls.0ef27a92.jpg"},224:function(e,t,n){e.exports=n(419)},253:function(e,t,n){},381:function(e,t,n){},414:function(e,t,n){},417:function(e,t,n){},418:function(e,t,n){},419:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(21),c=n.n(r),o=n(47),i=n(37),s=(n(151),n(99)),u=(n(49),n(14)),d=(n(174),n(88)),m=(n(153),n(45)),p=(n(119),n(69)),g=(n(51),n(8)),E=n(420),f=n(421),b=n(206),h=n.n(b),v=n(53),y=function(){return localStorage.getItem("access_token")},_=window.GLOBAL_CONFIG,k=Object(v.b)();console.log(_);var S=h.a.create({baseURL:_.BASE_URL});S.interceptors.request.use((function(e){return e.headers.Authorization="Bearer "+y(),e}),(function(e){return Promise.reject(e)})),S.interceptors.response.use((function(e){return console.log(e),401===e.data.code&&(localStorage.removeItem("access_token"),k.push("/login")),e.data}),(function(e){return Promise.reject(e)}));var T={get:function(e,t){return S.get(e,{params:t})},post:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return S.post(e,t,{params:n})},put:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return S.put(e,t,{params:n})},patch:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return S.patch(e,t,{params:n})},del:function(e,t){return S.delete(e,{params:t})}},O=(n(253),function(){var e=Object(i.g)();return l.a.createElement("div",{className:"site-card-border-less-wrapper"},l.a.createElement(s.a,{className:"card",title:"Login"},l.a.createElement(m.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:function(t){g.b.loading({content:"\u6b63\u5728\u63d0\u4ea4\u4e2d...",key:"loading",duration:0}),function(e){var t=new FormData;return t.append("username",e.username),t.append("password",e.password),T.post("/login",t)}(t).then((function(n){if(void 0!==n.access_token)return l=n.access_token,localStorage.setItem("access_token",l),a=t.username,localStorage.setItem("username",a),g.b.success({content:"\u767b\u5f55\u6210\u529f",key:"loading",duration:2}),void setTimeout((function(){e.push("/user")}),1e3);var a,l;void 0!==n.msg?g.b.error({content:n.msg,key:"loading",duration:2}):g.b.error({content:"\u767b\u5f55\u5931\u8d25",key:"loading",duration:2})}))}},l.a.createElement(m.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}]},l.a.createElement(p.a,{prefix:l.a.createElement(E.a,{className:"site-form-item-icon"}),placeholder:"Username"})),l.a.createElement(m.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},l.a.createElement(p.a,{prefix:l.a.createElement(f.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})),l.a.createElement(m.a.Item,null,l.a.createElement(m.a.Item,{name:"remember",valuePropName:"checked",noStyle:!0},l.a.createElement(d.a,null,"Remember me"))),l.a.createElement(m.a.Item,null,l.a.createElement(u.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in")))))});var C=function(){return l.a.createElement("div",null,"404 PageNotFound")},z=(n(361),n(118)),j=function(e){var t=e.path;return l.a.createElement(z.a,{style:{marginBottom:"2em"}},l.a.createElement(z.a.Item,{key:"home"},l.a.createElement(o.b,{to:"/"},"Home")),t.map((function(e,t){return void 0!==e.link&&""!==e.link?l.a.createElement(z.a.Item,{key:t},l.a.createElement(o.b,{to:e.link},e.title)):l.a.createElement(z.a.Item,{key:t},e.title)})))},x=function(){return l.a.createElement("div",null,l.a.createElement(j,{path:[{title:"Dashborad"}]}),"\u5565\u4e5f\u6ca1\u6709\u7684\u63a7\u5236\u53f0")},w=(n(164),n(98)),H=(n(201),n(146)),P=n(5),I=function(e,t,n){return T.put("/do_dns_record_update",{name:n.name,type:n.type,content:n.content,proxied:n.proxied,ttl:n.ttl},{zone_id:e,dns_record_id:t})},N=function(e,t,n){return T.patch("/do_zone_setting_update",{value:n},{zone_id:e,type:t})},R=function(e,t){return T.post("/do_cache_purge",{purge_everything:t.purge_everything||!1,files:t.files||[]},{zone_id:e})},L=(n(381),n(71),n(46)),A=n(6);var U=function(e){var t=Object(a.useState)(!1),n=Object(P.a)(t,2),r=n[0],c=n[1],i=[e.zone_id,[e.zones.zones,e.zones.setZones],e.index],s=i[0],d=Object(P.a)(i[1],2),m=d[0],p=d[1],E=i[2],f=Object(a.useCallback)((function(){c(!0),function(e){return T.del("/do_zone_delete",{zone_id:e})}(s).then((function(e){c(!1),200===e.code?(m.splice(E,1),p(Object(A.a)(m)),g.b.success({content:"\u5220\u9664\u6210\u529f",key:"loading"})):g.b.error({content:e.msg,key:"loading"})}))}),[s,m,p,E]);return l.a.createElement(L.a,{size:"middle"},l.a.createElement(o.b,{to:"/user/zone/control/"+s},l.a.createElement(u.a,{type:"primary"},"Manage")),l.a.createElement(o.b,{to:"/user/zone/"+s+"/dnsrecord"},l.a.createElement(u.a,null,"Manage DNS")),l.a.createElement(u.a,{type:"dashed",loading:r,onClick:f,danger:!0},"Delete"))},D=[{title:"Zones"}],M=function(){var e=Object(a.useState)([]),t=Object(P.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!0),o=Object(P.a)(c,2),i=o[0],s=o[1];Object(a.useEffect)((function(){T.get("/zone_list").then((function(e){s(!1),200===e.code?r(e.data):g.b.error(e.msg)}))}),[]);var u=Object(a.useMemo)((function(){return[{title:"Zone",dataIndex:"name",key:"name",render:function(e){return e}},{title:"Status",dataIndex:"status",key:"status",render:function(e){var t="green";return"active"!==e&&(t="volcano"),l.a.createElement(H.a,{color:t,key:e},e.toUpperCase())}},{title:"Operation",key:"operation",render:function(e,t,a){return l.a.createElement(U,{zone_id:t.id,index:a,zones:{zones:n,setZones:r}})}}]}),[n]);return l.a.createElement("div",null,l.a.createElement(j,{path:D}),l.a.createElement(w.a,{columns:u,dataSource:n,rowKey:function(e){return e.id},loading:i}))},F=n(59),B=n.n(F),V=n(89),W=(n(171),n(102)),Z=Object(a.createContext)({}),q=(n(91),n(39)),K=(n(202),n(144)),G=(n(106),n(43)),J=function(e){var t=Object(a.useState)(!1),n=Object(P.a)(t,2),r=n[0],c=n[1];return l.a.createElement(K.a,{loading:e.loading,active:!0},l.a.createElement(s.a,{title:e.title,hoverable:!0,actions:[l.a.createElement(G.a,{title:function(){return void 0!==e.setting&&!0===e.setting.editable?"on"===e.setting.value?"\u70b9\u51fb\u5173\u95ed":"\u70b9\u51fb\u5f00\u542f":"\u65e0\u6743\u64cd\u4f5c"},color:"cyan"},l.a.createElement(u.a,{onClick:function(){c(!0),e.handOnClick().finally((function(){return c(!1)}))},size:"large",loading:r,style:void 0===e.setting||!1===e.setting.editable||"on"!==e.setting.value?{}:{color:"#52c41a",background:"#f6ffed",borderColor:"#b7eb8f"}},void 0!==e.setting&&!0===e.setting.editable?"on"===e.setting.value?"ACTIVE":"DISABLED":"\u65e0\u6743\u64cd\u4f5c"))]},l.a.createElement("div",{style:{maxWidth:"600px",margin:"auto"},dangerouslySetInnerHTML:{__html:e.children}})))},X=function(e){return l.a.createElement(K.a,{loading:e.loading,active:!0},l.a.createElement(s.a,{title:e.title,hoverable:!0,actions:[e.actions]},l.a.createElement("div",{style:{maxWidth:"600px",margin:"auto"},dangerouslySetInnerHTML:{__html:e.children}})))},Q=q.a.Option;var Y=function(){var e=Object(a.useContext)(Z),t=e.zone_settings,n=e.zone_id,r=e.exchangeStatus,c=e.loading,o=Object(a.useCallback)((function(e){N(n,"security_level",e).then((function(e){200===e.code?g.b.success("\u5207\u6362\u6210\u529f"):g.b.info("\u5207\u6362\u5931\u8d25:"+e.msg)}))}),[n]),i=[{title:"\u5f00\u53d1\u6a21\u5f0f",setting:"development_mode",handOnClick:r("development_mode"),content:"\u6682\u65f6\u7ed5\u8fc7\u6211\u4eec\u7684\u7f13\u5b58\u3002\u5b9e\u65f6\u67e5\u770b\u5bf9\u60a8\u7684\u6e90\u670d\u52a1\u5668\u8fdb\u884c\u7684\u66f4\u6539\u3002"}];return l.a.createElement("div",null,l.a.createElement("h3",null,"\u5feb\u901f\u64cd\u4f5c"),l.a.createElement(L.a,{direction:"vertical",style:{width:"100%"}},l.a.createElement(X,{loading:c,title:"Under Attack \u6a21\u5f0f",setting:t.security_level,actions:[l.a.createElement(q.a,{key:"security_level",defaultValue:function(){return t.security_level.value},style:{width:"20rem",maxWidth:"80%"},onChange:o},l.a.createElement(Q,{value:"off"},"\u5173\u95ed\uff08Enterprise\uff09"),l.a.createElement(Q,{value:"essentially_off"},"\u57fa\u672c\uff08\u672c\u8d28\u4e0a\u4e3a\u5173\uff09"),l.a.createElement(Q,{value:"low"},"\u4f4e"),l.a.createElement(Q,{value:"medium"},"\u4e2d"),l.a.createElement(Q,{value:"high"},"\u9ad8"),l.a.createElement(Q,{value:"under_attack"},"\u65e0\u654c"))]},"\u5728\u8bbf\u95ee\u8005\u8bbf\u95ee\u60a8\u7684\u7ad9\u70b9\u65f6\u663e\u793a JavaScript \u8d28\u8be2\u3002"),i.map((function(e){return l.a.createElement(J,{loading:c,title:e.title,setting:t[e.setting],handOnClick:e.handOnClick,key:e.setting},e.content)}))))},$=(n(162),n(50)),ee=function(e){return l.a.createElement("img",{src:e.src,alt:"",style:{width:"100%",height:"100%"}})},te=n(220),ne=n.n(te),ae=(n(203),n(143)),le=(n(172),n(83)),re=(n(173),n(54)),ce=(n(204),n(117)),oe=(n(163),n(75)),ie=n(115),se=n.n(ie),ue=n(221),de=n.n(ue);se.a.locale("zh-cn",de.a);var me=function(e){var t="second";switch(!0){case e<60:t="s";break;case e<3600:t="m";break;case e<86400:t="h";break;case e<604800:t="d";break;case e<2592e3:t="w";break;case e<31536e3:t="M";break;default:t="y"}return Math.round(se.a.duration(e,"s").as(t))+" "+function(e){return{year:"\u5e74",month:"\u6708",week:"\u5468",day:"\u5929",hour:"\u5c0f\u65f6",minute:"\u5206\u949f",second:"\u79d2",millisecond:"\u6beb\u79d2"}[e]||"\u672a\u77e5"}(se.a.normalizeUnits(t))},pe=q.a.Option;var ge=function(e){var t=[e.visibleState,e.zone_id],n=Object(P.a)(t[0],2),r=n[0],c=n[1],o=t[1],i=Object(a.useState)(!1),s=Object(P.a)(i,2),u=s[0],d=s[1],m=Object(a.useState)(e.modalHSTS),p=Object(P.a)(m,2),E=p[0],f=p[1];Object(a.useEffect)((function(){c(r)}),[r,c]);var b=function(e,t){E[e]=t,f(Object.assign({},E))},h=[{content:l.a.createElement("div",null,l.a.createElement("strong",null,"\u542f\u7528 HSTS (Strict-Transport-Security)"),l.a.createElement("p",null,"\u4e3a\u6240\u6709 HTTPS \u8bf7\u6c42\u63d0\u4f9b HSTS \u6807\u5934")),action:l.a.createElement(oe.a,{checked:E.enabled,onChange:function(e){return b("enabled",e)}})},{content:l.a.createElement("div",null,l.a.createElement("strong",null,"\u6700\u957f\u671f\u9650\u6807\u5934 (max-age)"),l.a.createElement("p",null,"\u6307\u5b9a HSTS \u6807\u5934\u5728\u6d4f\u89c8\u5668\u4e2d\u7f13\u5b58\u7684\u6301\u7eed\u65f6\u95f4")),action:l.a.createElement(q.a,{defaultValue:E.max_age,style:{width:"100%"}},Object(A.a)(Array(13)).map((function(e,t){return 2592e3*t})).map((function(e){return 0===e?l.a.createElement(pe,{value:e,key:e},"0\uff08\u7981\u7528\uff09"):l.a.createElement(pe,{value:e,key:e},me(e))})))},{content:l.a.createElement("div",null,l.a.createElement("strong",null,"\u5c06 HSTS \u7b56\u7565\u5e94\u7528\u4e8e\u5b50\u57df (includeSubDomains)"),l.a.createElement("p",null,"\u6b64\u57df\u4e0b\u7684\u6bcf\u4e2a\u57df\u5c06\u7ee7\u627f\u76f8\u540c\u7684 HSTS \u6807\u5934",l.a.createElement("br",null),l.a.createElement("strong",null,"\u8b66\u544a\uff1a"),"\u5982\u679c\u60a8\u7684\u4efb\u4f55\u5b50\u57df\u4e0d\u652f\u6301 HTTPS\uff0c\u8fd9\u4e9b\u5b50\u57df\u5c06\u53d8\u4e3a\u4e0d\u53ef\u8bbf\u95ee\u3002")),action:l.a.createElement(oe.a,{checked:E.include_subdomains,onChange:function(e){return b("include_subdomains",e)}})},{content:l.a.createElement("div",null,l.a.createElement("strong",null,"\u9884\u52a0\u8f7d"),l.a.createElement("p",null,"\u5141\u8bb8\u6d4f\u89c8\u5668\u81ea\u52a8\u9884\u52a0\u8f7d HSTS \u914d\u7f6e",l.a.createElement("br",null),l.a.createElement("strong",null,"\u8b66\u544a\uff1a"),"\u9884\u52a0\u8f7d\u53ef\u80fd\u4f1a\u4f7f\u4e0d\u652f\u6301 HTTPS \u7684\u7f51\u7ad9\u5b8c\u5168\u4e0d\u53ef\u8bbf\u95ee\u3002")),action:l.a.createElement(oe.a,{checked:E.preload,onChange:function(e){return b("preload",e)}})},{content:l.a.createElement("div",null,l.a.createElement("strong",null,"\u65e0\u55c5\u63a2\u6807\u5934"),l.a.createElement("p",null,"\u53d1\u9001 \u201cX-Content-Type-Options: nosniff\u201d \u6807\u5934\uff0c\u6765\u9632\u6b62 Internet Explorer \u548c Google Chrome \u6d4f\u89c8\u5668\u901a\u8fc7 MIME \u5728\u58f0\u660e\u7684 Content-Type \u4e2d\u56db\u5904\u55c5\u63a2\u3002")),action:l.a.createElement(oe.a,{checked:E.nosniff,onChange:function(e){return b("nosniff",e)}})}];return l.a.createElement("div",null,l.a.createElement(ae.a,{title:"HTTP \u4e25\u683c\u4f20\u8f93\u5b89\u5168 (HSTS)",visible:r,onOk:function(){d(!0),N(o,"security_header",{strict_transport_security:E}).then((function(e){200===e.code?g.b.success("\u5207\u6362\u6210\u529f"):g.b.info("\u5207\u6362\u5931\u8d25:"+e.msg)})).finally((function(){return d(!1)}))},confirmLoading:u,onCancel:function(){return c(!1)},key:"modal"},l.a.createElement(ce.a,{message:"\u60a8\u5c06\u9700\u8981\u6307\u5b9a\u6587\u4ef6\u7684\u5b8c\u6574\u8def\u5f84\u3002",description:l.a.createElement("div",null,l.a.createElement("p",null,"HTTP \u4e25\u683c\u4f20\u8f93\u5b89\u5168 (HTTP Strict Transport Security, HSTS) \u53ef\u4ee5\u5927\u5e45\u63d0\u9ad8\u7f51\u7ad9\u7684\u5b89\u5168\u6027\u3002\u4f46\u662f\uff0c\u542f\u7528 HSTS \u65f6\uff0c\u8bf7\u8c28\u8bb0\u4ee5\u4e0b\u91cd\u8981\u6ce8\u610f\u4e8b\u9879\uff1a"),l.a.createElement("strong",null,"\u5fc5\u987b\u542f\u7528 HTTPS (SSL) \u624d\u80fd\u4f7f\u7528 HSTS\u3002"),l.a.createElement("ul",null,l.a.createElement("li",null,"\u5982\u679c\u60a8\u6253\u5f00 HSTS\uff0c\u4f46\u60a8\u7684\u7f51\u7ad9\u4e0d\u652f\u6301 HTTPS\uff0c\u6d4f\u89c8\u5668\u5c06\u4e0d\u63a5\u53d7 HSTS \u8bbe\u7f6e\u3002"),l.a.createElement("li",null,"\u5982\u679c\u60a8\u542f\u7528\u4e86 HSTS \u4f46\u79bb\u5f00\u4e86 Cloudflare\uff0c\u60a8\u9700\u8981\u901a\u8fc7\u65b0\u7684\u670d\u52a1\u63d0\u4f9b\u5546\u7ee7\u7eed\u652f\u6301 HTTPS\uff0c\u5426\u5219\uff0c\u5728\u60a8\u652f\u6301 HTTPS \u4e4b\u524d\uff0c\u8bbf\u95ee\u8005\u5c06\u65e0\u6cd5\u8bbf\u95ee\u60a8\u7684\u7ad9\u70b9\u3002"),l.a.createElement("li",null,"\u5982\u679c\u5728\u542f\u7528 HSTS \u540e\u5173\u95ed\u4e86 Cloudflare \u7684 HTTPS\uff0c\u5e76\u4e14\u6e90\u670d\u52a1\u5668\u4e0a\u6ca1\u6709\u6709\u6548\u7684 SSL \u8bc1\u4e66\uff0c\u8bbf\u95ee\u8005\u5c06\u65e0\u6cd5\u8bbf\u95ee\u60a8\u7684\u7f51\u7ad9\u3002"),l.a.createElement("li",null,"\u6ce8\u610f\uff1a\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u51e0\u79cd\u65b9\u6cd5\u7981\u7528 Cloudflare \u7684 HTTP\uff1a\u5728 DNS \u8bb0\u5f55\u4e2d\u906e\u853d\u5b50\u57df\uff0c\u201c\u6682\u505c\u201d Cloudflare \u670d\u52a1\uff0c\u6216\u901a\u8fc7\u60a8\u7684 Cloudflare \u4eea\u8868\u677f\u914d\u7f6e\u9519\u8bef\u7684\u81ea\u5b9a\u4e49 SSL \u8bc1\u4e66\uff08\u4f8b\u5982\uff0c\u65e0\u6548\u7684 SSL \u8bc1\u4e66\u3001\u8fc7\u671f\u8bc1\u4e66\u6216\u4e0d\u5339\u914d\u7684\u4e3b\u673a\u540d\uff09\u3002")),l.a.createElement("p",null,"\u5982\u679c\u60a8\u9700\u8981\u5728\u57df\u4e0a\u7981\u7528 HTTPS\uff0c\u5fc5\u987b\u5148\u5728\u60a8\u7684 Cloudflare \u4eea\u8868\u677f\u4e2d\u7981\u7528 HSTS\uff0c\u5e76\u7b49\u5230\u6700\u957f\u671f\u9650\u8fc7\u53bb\uff08\u4ee5\u786e\u4fdd\u6bcf\u4e2a\u6d4f\u89c8\u5668\u90fd\u77e5\u9053\u6b64\u66f4\u6539\uff09\uff0c\u7136\u540e\u624d\u80fd\u7981\u7528 HTTPS\u3002\u5e73\u5747\u6700\u957f\u671f\u9650\u4e3a\u516d\u4e2a\u6708\uff08\u60a8\u53ef\u4ee5\u5728\u4e0b\u4e00\u6b65\u4e2d\u8bbe\u7f6e\u6700\u957f\u671f\u9650\uff09\u3002\u5982\u679c\u60a8\u5728\u7981\u7528 HSTS \u4e4b\u524d\u5220\u9664\u4e86 HTTPS\uff0c\u8bbf\u95ee\u8005\u5c06\u65e0\u6cd5\u8bbf\u95ee\u60a8\u7684\u7f51\u7ad9\uff0c\u76f4\u81f3\u8fbe\u5230\u6700\u957f\u671f\u9650\u6216\u60a8\u518d\u6b21\u652f\u6301 HTTPS\u3002\u7531\u4e8e\u5728\u542f\u7528 HSTS \u7684\u7f51\u7ad9\u4e0a\u7981\u7528 HTTPS \u53ef\u80fd\u4f1a\u5bfc\u81f4\u8fd9\u4e9b\u540e\u679c\uff0c\u56e0\u6b64\u6211\u4eec\u5f3a\u70c8\u5efa\u8bae\u60a8\u5148\u90e8\u7f72 HTTPS \u670d\u52a1\u518d\u542f\u7528\u6b64\u529f\u80fd")),type:"info",closable:!0}),l.a.createElement("br",null),l.a.createElement(ce.a,{message:"\u8b66\u544a\uff1a",description:l.a.createElement("strong",null,"\u5982\u679c\u914d\u7f6e\u4e0d\u6b63\u786e\uff0cHTTP \u4e25\u683c\u4f20\u8f93\u5b89\u5168 (HSTS) \u53ef\u80fd\u4f1a\u4f7f\u60a8\u7684\u7f51\u7ad9\u957f\u65f6\u95f4\u4e0d\u53ef\u8bbf\u95ee\u3002"),type:"warning"}),l.a.createElement("br",null),h.map((function(e,t){return l.a.createElement(le.a,{key:t},l.a.createElement(re.a,{span:18},e.content),l.a.createElement(re.a,{span:6,style:{display:"flex",justifyContent:"center",alignItems:"center"}},e.action))}))))},Ee=q.a.Option;var fe=function(){var e=Object(a.useContext)(Z),t=e.zone_settings,n=e.zone_id,r=e.exchangeStatus,c=e.loading,o=Object(a.useState)(!1),i=Object(P.a)(o,2),s=i[0],d=i[1],m=Object(a.useCallback)((function(e){N(n,"ssl",e.target.value).then((function(e){200===e.code?g.b.success("\u5207\u6362\u6210\u529f"):g.b.info("\u5207\u6362\u5931\u8d25:"+e.msg)}))}),[n]),p=[{title:"\u59cb\u7ec8\u4f7f\u7528 HTTPS",setting:"always_use_https",handOnClick:r("always_use_https"),content:"\u5c06\u6240\u6709\u4f7f\u7528\u65b9\u6848 \u201chttp\u201d \u7684\u8bf7\u6c42\u91cd\u5b9a\u5411\u5230 \u201chttps\u201d\u3002\u8fd9\u5c06\u5e94\u7528\u4e8e\u8be5\u533a\u57df\u7684\u6240\u6709 http \u8bf7\u6c42\u3002"},{title:"\u968f\u673a\u52a0\u5bc6",setting:"opportunistic_encryption",handOnClick:r("opportunistic_encryption"),content:"\u968f\u673a\u52a0\u5bc6\u53ef\u4ee5\u8ba9\u6d4f\u89c8\u5668\u77e5\u9053\u60a8\u7684\u7ad9\u70b9\u901a\u8fc7\u52a0\u5bc6\u8fde\u63a5\u63d0\u4f9b\uff0c\u4ece\u800c\u8ba9\u5b83\u4eec\u4ece HTTP/2 \u7684\u6027\u80fd\u6539\u8fdb\u4e2d\u53d7\u76ca\u3002\u6d4f\u89c8\u5668\u5c06\u7ee7\u7eed\u5728\u5730\u5740\u680f\u4e2d\u663e\u793a \u201chttp\u201d\uff0c\u800c\u4e0d\u662f \u201chttps\u201d\u3002"},{title:"\u81ea\u52a8 HTTPS \u91cd\u5199",setting:"automatic_https_rewrites",handOnClick:r("automatic_https_rewrites"),content:"\u81ea\u52a8 HTTPS \u91cd\u5199\u901a\u8fc7\u5c06\u53ef\u4ee5\u4f7f\u7528 HTTPS \u63d0\u4f9b\u670d\u52a1\u7684\u7f51\u7ad9\u4e0a\u6240\u6709\u8d44\u6e90\u6216\u94fe\u63a5\u7684 \u201chttp\u201d \u66f4\u6539\u4e3a \u201chttps\u201d \u6765\u5e2e\u52a9\u4fee\u6b63\u6df7\u5408\u5185\u5bb9\u3002"}];return l.a.createElement(L.a,{direction:"vertical",style:{width:"100%"}},l.a.createElement(X,{loading:c,title:"\u60a8\u7684 SSL/TLS \u52a0\u5bc6\u6a21\u5f0f\u4e3a ".concat(t.ssl.value),setting:t.min_tls_version,actions:l.a.createElement($.a.Group,{defaultValue:t.ssl.value,onChange:m,key:"ssl"},l.a.createElement(G.a,{title:"\u672a\u5e94\u7528\u52a0\u5bc6",color:"cyan"},l.a.createElement($.a.Button,{value:"off"},"\u5173\u95ed\uff08\u4e0d\u5b89\u5168\uff09")),l.a.createElement(G.a,{title:"\u52a0\u5bc6\u6d4f\u89c8\u5668\u4e0e Cloudflare \u4e4b\u95f4\u7684\u6d41\u91cf",color:"cyan"},l.a.createElement($.a.Button,{value:"flexible"},"\u7075\u6d3b")),l.a.createElement(G.a,{title:"\u7aef\u5230\u7aef\u52a0\u5bc6\uff0c\u4f7f\u7528\u670d\u52a1\u5668\u4e0a\u7684\u81ea\u7b7e\u540d\u8bc1\u4e66",color:"cyan"},l.a.createElement($.a.Button,{value:"full"},"\u5b8c\u5168")),l.a.createElement(G.a,{title:"\u7aef\u5230\u7aef\u52a0\u5bc6\uff0c\u4f46\u670d\u52a1\u5668\u4e0a\u9700\u8981\u6709\u53d7\u4fe1\u4efb\u7684 CA \u8bc1\u4e66\u6216 Cloudflare Origin CA \u8bc1\u4e66",color:"cyan"},l.a.createElement($.a.Button,{value:"strict"},"\u5b8c\u5168\uff08\u4e25\u683c\uff09")))},l.a.createElement(ee,{src:ne.a}),l.a.createElement("div",{style:{padding:"1em 0"}},l.a.createElement("strong",null,"\u6b64\u8bbe\u7f6e\u4e0a\u6b21\u66f4\u6539\u65f6\u95f4\u4e3a ",t.ssl.modified_on))),l.a.createElement(X,{loading:c,title:"\u6700\u4f4e TLS \u7248\u672c",setting:t.min_tls_version,actions:[l.a.createElement(q.a,{key:"min_tls_version",defaultValue:t.min_tls_version.value,style:{width:"20rem",maxWidth:"80%"},onChange:function(e){N(n,"min_tls_version",e).then((function(e){200===e.code?g.b.success("\u5207\u6362\u6210\u529f"):g.b.info("\u5207\u6362\u5931\u8d25:"+e.msg)}))}},l.a.createElement(Ee,{value:"1.0"},"1.0"),l.a.createElement(Ee,{value:"1.1"},"1.1"),l.a.createElement(Ee,{value:"1.2"},"1.2"),l.a.createElement(Ee,{value:"1.3"},"1.3"))]},"\u4ec5\u5141\u8bb8\u6765\u81ea\u652f\u6301\u6240\u9009 TLS \u534f\u8bae\u7248\u672c\u6216\u66f4\u9ad8\u7248\u672c\u7684\u8bbf\u95ee\u8005\u7684 HTTPS \u8fde\u63a5\u3002"),l.a.createElement(X,{loading:c,title:"HTTP \u4e25\u683c\u4f20\u8f93\u5b89\u5168 (HSTS)",setting:t.security_header,actions:[l.a.createElement(G.a,{title:"\u70b9\u51fb\u5207\u6362",color:"cyan",key:"security_header"},l.a.createElement(u.a,{onClick:function(){return d(!0)}},!0===t.security_header.enabled?"\u5173\u95edHTTP \u4e25\u683c\u4f20\u8f93\u5b89\u5168 (HSTS)":"\u542f\u7528HTTP \u4e25\u683c\u4f20\u8f93\u5b89\u5168 (HSTS)")),l.a.createElement(ge,{key:"Hsts",visibleState:[s,d],zone_id:n,modalHSTS:t.security_header.value.strict_transport_security})]},"\u5bf9\u60a8\u7684\u7f51\u7ad9\u5f3a\u5236\u6267\u884c Web \u5b89\u5168\u7b56\u7565\u3002"),p.map((function(e){return l.a.createElement(J,{loading:c,title:e.title,setting:t[e.setting],handOnClick:e.handOnClick,key:e.setting},e.content)})))};var be=function(){var e=Object(a.useContext)(Z).loading;return l.a.createElement("div",null,l.a.createElement(J,{title:"\u9632\u706b\u5899\u89c4\u5219",loading:e},l.a.createElement("h1",null,"\u6682\u65f6\u4e0d\u53ef\u7528"),"\u901a\u8fc7\u57fa\u4e8e\u4f4d\u7f6e\u3001IP \u5730\u5740\u3001\u7528\u6237\u4ee3\u7406\u548c URI \u7b49\u7b5b\u9009\u8bf7\u6c42\uff0c\u6765\u63a7\u5236\u4f20\u5165\u5230\u60a8\u7684\u533a\u57df\u7684\u6d41\u91cf\u3002 \u60a8\u5df2\u4f7f\u7528 0 \u4e2a\u6d3b\u52a8\u7684\u9632\u706b\u5899\u89c4\u5219\uff08\u603b\u8ba1 5 \u4e2a\uff09\u3002"))},he=(n(205),n(148)),ve=q.a.Option,ye=p.a.TextArea;var _e=function(){var e=Object(a.useContext)(Z),t=e.zone_settings,n=e.zone_id,r=e.exchangeStatus,c=e.loading,o=Object(a.useState)(!1),i=Object(P.a)(o,2),s=i[0],d=i[1],m=Object(a.useState)(!1),p=Object(P.a)(m,2),E=p[0],f=p[1],b=Object(a.useState)(""),h=Object(P.a)(b,2),v=h[0],y=h[1],_=Object(a.useCallback)((function(e){N(n,"cache_level",e.target.value).then((function(e){200===e.code?g.b.success("\u5207\u6362\u6210\u529f"):g.b.info("\u5207\u6362\u5931\u8d25:"+e.msg)}))}),[n]),k=Object(a.useCallback)((function(){R(n,{purge_everything:!0}).then((function(e){200===e.code?g.b.success("\u5207\u6362\u6210\u529f"):g.b.info("\u5207\u6362\u5931\u8d25:"+e.msg)}))}),[n]),S=Object(a.useCallback)((function(){if(f(!0),y(v.trim()),0!==v.length){var e={files:v.split("\n")};R(n,e).then((function(e){200===e.code?g.b.success("\u5207\u6362\u6210\u529f"):g.b.info("\u5207\u6362\u5931\u8d25:"+e.msg)})).finally((function(){f(!1)}))}else g.b.warning("URL\u4e0d\u5f97\u4e3a\u7a7a")}),[n,v]),T=Object(a.useCallback)((function(e){console.log(e),N(n,"browser_cache_ttl",e).then((function(e){200===e.code?g.b.success("\u5207\u6362\u6210\u529f"):g.b.info("\u5207\u6362\u5931\u8d25:"+e.msg)}))}),[n]),O=[{title:"Always Online\u2122",setting:"always_online",handOnClick:r("always_online"),content:"\u5982\u679c\u60a8\u7684\u670d\u52a1\u5668\u5173\u95ed\uff0cCloudflare \u5c06\u4f7f\u7528\u6211\u4eec\u7684\u7f13\u5b58\u4e3a\u60a8\u7684\u7f51\u7ad9\u7684\u9759\u6001\u9875\u9762\u63d0\u4f9b\u670d\u52a1\u3002"},{title:"\u5f00\u53d1\u6a21\u5f0f\u2122",setting:"development_mode",handOnClick:r("development_mode"),content:"\u6682\u65f6\u7ed5\u8fc7\u6211\u4eec\u7684\u7f13\u5b58\u53ef\u4ee5\u5b9e\u65f6\u67e5\u770b\u5bf9\u60a8\u7684\u6e90\u670d\u52a1\u5668\u8fdb\u884c\u7684\u66f4\u6539\u3002<br />\u6ce8\u610f\uff1a\u542f\u7528\u6b64\u529f\u80fd\u53ef\u663e\u8457\u52a0\u5feb\u6e90\u670d\u52a1\u5668\u7684\u52a0\u8f7d\u901f\u5ea6\u3002\u5f00\u53d1\u6a21\u5f0f\u4e0d\u4f1a\u6e05\u9664\u7f13\u5b58\uff0c\u56e0\u6b64\u9700\u8981\u5728\u5f00\u53d1\u6a21\u5f0f\u8fc7\u671f\u540e\u6e05\u9664\u6587\u4ef6\u3002"}],C=[{title:"\u6e05\u9664\u7f13\u5b58",setting:"purge_cache",actions:[l.a.createElement(G.a,{title:"\u81ea\u5b9a\u4e49\u6e05\u9664",color:"cyan",key:"purge_files_by_url"},l.a.createElement(u.a,{onClick:function(){return d(!0)}},"\u81ea\u5b9a\u4e49\u6e05\u9664")),l.a.createElement(G.a,{title:"\u6e05\u7406\u5168\u90e8\u7f13\u5b58\uff0c\u614e\u7528",color:"cyan",key:"purge_everything"},l.a.createElement(he.a,{title:"\u60a8\u786e\u5b9a\u8981\u6e05\u7406\u5168\u90e8\u7f13\u5b58\u5417\uff1f",onConfirm:k,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},l.a.createElement(u.a,null,"\u6e05\u7406\u5168\u90e8"))),l.a.createElement(ae.a,{title:"\u81ea\u5b9a\u4e49\u6e05\u9664",visible:s,onOk:S,confirmLoading:E,onCancel:function(){return d(!1)},key:"modal"},l.a.createElement(ce.a,{message:"\u60a8\u5c06\u9700\u8981\u6307\u5b9a\u6587\u4ef6\u7684\u5b8c\u6574\u8def\u5f84\u3002",description:l.a.createElement("div",null,l.a.createElement("p",null,"\u76ee\u524d\u8fdb\u884c\u5355\u4e2a URL \u6e05\u9664\u65f6\u4e0d\u652f\u6301\u901a\u914d\u7b26\u3002\u60a8\u4e00\u6b21\u6700\u591a\u53ef\u4ee5\u6e05\u9664 30 \u4e2a URL\u3002 \u6309\u7167\u6bcf\u884c\u4e00\u4e2a\u7684\u65b9\u5f0f\u5206\u9694 URL\u3002"),l.a.createElement("strong",null,"\u793a\u4f8b\uff1a"),l.a.createElement("ul",null,l.a.createElement("li",null,"https://www.v8cdn.xyz"),l.a.createElement("li",null,"https://www.v8cdn.xyz/cat.jpg"))),type:"info",closable:!0}),l.a.createElement("br",null),l.a.createElement(ye,{rows:4,value:v,onChange:function(e){y(e.target.value)}}))],content:"\u6e05\u9664\u7f13\u5b58\u6587\u4ef6\u4ee5\u5f3a\u5236 Cloudflare \u4ece\u60a8\u7684 Web \u670d\u52a1\u5668\u4e2d\u63d0\u53d6\u8fd9\u4e9b\u6587\u4ef6\u7684\u6700\u65b0\u7248\u672c\u3002\u60a8\u53ef\u4ee5\u9009\u62e9\u6027\u5730\u6e05\u9664\u6587\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u540c\u65f6\u6e05\u9664\u6240\u6709\u6587\u4ef6\u3002<br /><strong>\u6ce8\u610f\uff1a</strong>\u6e05\u9664\u7f13\u5b58\u53ef\u80fd\u4f1a\u4f7f\u60a8\u7684\u7f51\u7ad9\u6027\u80fd\u6682\u65f6\u964d\u7ea7\uff0c\u5e76\u5ef6\u957f\u5728\u60a8\u7684\u6e90\u670d\u52a1\u5668\u4e0a\u52a0\u8f7d\u6587\u4ef6\u7684\u65f6\u95f4\u3002"},{title:"\u7f13\u5b58\u7ea7\u522b",setting:"cache_level",actions:[l.a.createElement($.a.Group,{defaultValue:t.cache_level.value,key:"cache_level",onChange:_},l.a.createElement(G.a,{title:"\u6ca1\u6709\u67e5\u8be2\u5b57\u7b26\u4e32",color:"cyan"},l.a.createElement($.a.Button,{value:"basic"},"\u6ca1\u6709\u67e5\u8be2\u5b57\u7b26\u4e32")),l.a.createElement(G.a,{title:"\u5ffd\u7565\u67e5\u8be2\u5b57\u7b26\u4e32",color:"cyan"},l.a.createElement($.a.Button,{value:"simplified"},"\u5ffd\u7565\u67e5\u8be2\u5b57\u7b26\u4e32")),l.a.createElement(G.a,{title:"\u6807\u51c6",color:"cyan"},l.a.createElement($.a.Button,{value:"aggressive"},"\u6807\u51c6")))],content:"\u786e\u5b9a\u60a8\u5e0c\u671b Cloudflare \u5bf9\u60a8\u7684\u7f51\u7ad9\u8fdb\u884c\u7f13\u5b58\u7684\u9759\u6001\u5185\u5bb9\u91cf\u3002\u589e\u52a0\u7f13\u5b58\u53ef\u4ee5\u7f29\u77ed\u9875\u9762\u52a0\u8f7d\u65f6\u95f4\u3002"},{title:"\u6d4f\u89c8\u5668\u7f13\u5b58 TTL",setting:"browser_cache_ttl",actions:[l.a.createElement(q.a,{defaultValue:t.browser_cache_ttl.value,style:{width:"20rem",maxWidth:"80%"},key:"browser_cache_ttl",onChange:T},[0,30,60,300,1200,1800,3600,7200,10800,14400,18e3,28800,43200,57600,72e3,86400,172800,259200,345600,432e3,691200,1382400,2073600,2678400,5356800,16070400,31536e3].map((function(e){return 0===e?l.a.createElement(ve,{value:e,key:e},"\u9075\u5faa\u73b0\u6709\u6807\u5934"):l.a.createElement(ve,{value:e,key:e},me(e))})))],content:"\u786e\u5b9a Cloudflare \u6307\u793a\u8bbf\u95ee\u8005\u7684\u6d4f\u89c8\u5668\u7f13\u5b58\u6587\u4ef6\u7684\u65f6\u957f\u3002\u5728\u6b64\u671f\u95f4\uff0c\u6d4f\u89c8\u5668\u4f1a\u4ece\u5176\u672c\u5730\u7f13\u5b58\u4e2d\u52a0\u8f7d\u6587\u4ef6\uff0c\u4ece\u800c\u63d0\u9ad8\u9875\u9762\u52a0\u8f7d\u901f\u5ea6\u3002"}];return l.a.createElement(L.a,{direction:"vertical",style:{width:"100%"}},C.map((function(e,n){return l.a.createElement(X,{loading:c,title:e.title,setting:t[e.setting],key:e.setting,actions:e.actions},e.content)})),O.map((function(e,n){return l.a.createElement(J,{loading:c,title:e.title,setting:t[e.setting],handOnClick:e.handOnClick,key:e.setting},e.content)})))},ke=n(422);var Se=function(e){var t=Object(a.useState)(!1),n=Object(P.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(!1),s=Object(P.a)(i,2),d=s[0],m=s[1];return l.a.createElement(L.a,null,l.a.createElement(oe.a,{loading:r,checked:"active"===e.record.status,onChange:function(t){c(!0);var n,a,l,r=JSON.parse(JSON.stringify(e.pageRules.pageRules));r[e.index].status=!0===t?"active":"disabled",(n=e.zone_id,a=r[e.index].id,l=r[e.index],T.put("/do_zone_pagerule_update",{targets:l.targets||[],actions:l.actions||[],priority:l.priority||1,status:l.status||"active"},{zone_id:n,pagerule_id:a})).then((function(t){200===t.code?(e.pageRules.setPageRules(r),g.b.success("\u5207\u6362\u6210\u529f")):g.b.info("\u5207\u6362\u5931\u8d25:"+t.msg)})).finally((function(){return c(!1)}))}}),l.a.createElement(o.b,{to:"/user/zone/control/"+e.zone_id+"/pagerule/"+e.record.id},l.a.createElement(u.a,{type:"dashed"},"Manage")),l.a.createElement(he.a,{title:"\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",onConfirm:function(t){m(!0);var n,a,l=Object(A.a)(e.pageRules.pageRules);(n=e.zone_id,a=l[e.index].id,T.del("/do_zone_pagerule_delete",{zone_id:n,pagerule_id:a})).then((function(t){200===t.code?(l.splice(e.index,1),e.pageRules.setPageRules(l),g.b.success("\u5220\u9664\u6210\u529f")):g.b.info(t.msg)})).finally((function(){return m(!1)}))},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},l.a.createElement(u.a,{loading:d,type:"dashed",shape:"circle",icon:l.a.createElement(ke.a,null),danger:!0})))},Te=function(e){var t=Object(a.useContext)(Z).zone_id,n=Object(a.useState)([]),r=Object(P.a)(n,2),c=r[0],o=r[1],i=Object(a.useState)(!0),s=Object(P.a)(i,2),u=s[0],d=s[1],m=[{title:"URL/\u8bf4\u660e",dataIndex:"title",key:"title",render:function(e,t){return l.a.createElement("div",null,l.a.createElement("h4",null,t.targets.map((function(e,t){return l.a.createElement("span",{key:t,color:"cyan"},e.constraint.value)}))),l.a.createElement("br",null),l.a.createElement("p",null,t.actions.map((function(e,t){return l.a.createElement(H.a,{key:t,color:"cyan"},e.id,":",e.value)}))))}},{title:"Action",key:"action",render:function(e,n,a){return l.a.createElement(Se,{record:n,zone_id:t,pageRules:{pageRules:c,setPageRules:o},index:a})}}];return Object(a.useEffect)((function(){(function(e){return T.get("/get_zone_pagerules",{zone_id:e})})(t).then((function(e){console.log(e),200===e.code?o(e.data):g.b.error("\u83b7\u53d6\u9875\u9762\u89c4\u5219\u5931\u8d25")})).finally((function(){return d(!1)}))}),[t]),l.a.createElement(L.a,{direction:"vertical",style:{width:"100%"}},l.a.createElement(J,{loading:u,title:"\u9875\u9762\u89c4\u5219"},"\u9875\u9762\u89c4\u5219\u7528\u4e8e\u63a7\u5236\u9488\u5bf9\u7ed9\u5b9a\u7684 URL \u89e6\u53d1\u54ea\u4e9b Cloudflare \u8bbe\u7f6e\u3002\u9488\u5bf9\u6bcf\u4e2a URL \u4ec5\u89e6\u53d1\u4e00\u4e2a\u9875\u9762\u89c4\u5219\uff0c\u56e0\u6b64\uff0c\u5982\u679c\u60a8\u6309\u7167\u4f18\u5148\u7ea7\u987a\u5e8f\u5bf9\u9875\u9762\u89c4\u5219\u8fdb\u884c\u6392\u5e8f\uff0c\u5219\u8fd9\u975e\u5e38\u6709\u7528\uff0c\u8bf7\u5c3d\u53ef\u80fd\u5c06 URL \u6a21\u5f0f\u8bbe\u7f6e\u5f97\u5177\u4f53\u4e9b\u3002 \u60a8\u5269\u4e0b 2 \u4e2a\u9875\u9762\u89c4\u5219 \u4e2a\u3002"),l.a.createElement(w.a,{loading:u,columns:m,dataSource:c,rowKey:function(e){return e.id}}))};var Oe=function(){var e=Object(a.useContext)(Z),t=e.zone_settings,n=e.exchangeStatus,r=e.loading,c=[{title:"HTTP/2",setting:"http2",handOnClick:n("http2"),content:"\u4f7f\u7528 HTTP/2 \u52a0\u901f\u60a8\u7684\u7f51\u7ad9"},{title:"HTTP/3\uff08\u4f7f\u7528 QUIC\uff09",setting:"http3",handOnClick:n("http3"),content:"\u4f7f\u7528 QUIC \u52a0\u901f HTTP \u8bf7\u6c42\uff0cQUIC \u63d0\u4f9b\u6bd4 TCP \u548c TLS \u66f4\u9ad8\u7684\u52a0\u5bc6\u548c\u6027\u80fd\u3002"},{title:"0-RTT \u8fde\u63a5\u6062\u590d",setting:"0rtt",handOnClick:n("0rtt"),content:"\u63d0\u9ad8\u4e4b\u524d\u5df2\u8fde\u63a5\u5230\u60a8\u7f51\u7ad9\u7684\u5ba2\u6237\u7aef\u7684\u6027\u80fd\u3002"},{title:"WebSocket",setting:"websockets",handOnClick:n("websockets"),content:"\u5141\u8bb8\u4e0e\u60a8\u7684\u6e90\u670d\u52a1\u5668\u5efa\u7acb WebSocket \u8fde\u63a5\u3002<br />\u9002\u7528\u4e8e\u60a8\u6240\u7528\u8ba1\u5212\u7684\u5e76\u53d1\u8fde\u63a5\u51c6\u5219\uff1alow"},{title:"\u6d0b\u8471\u8def\u7531",setting:"opportunistic_onion",handOnClick:n("opportunistic_onion"),content:"\u6d0b\u8471\u8def\u7531\u5141\u8bb8\u901a\u8fc7 Cloudflare \u7684\u6d0b\u8471\u670d\u52a1\u800c\u4e0d\u662f\u9000\u51fa\u8282\u70b9\u8def\u7531\u6765\u81ea Tor \u7f51\u7edc\u4e0a\u5408\u6cd5\u7528\u6237\u7684\u6d41\u91cf\uff0c\u4ece\u800c\u6539\u5584\u7528\u6237\u7684\u9690\u79c1\u5e76\u5b9e\u73b0\u66f4\u7ec6\u5316\u7684\u4fdd\u62a4\u3002"},{title:"IP \u5730\u7406\u4f4d\u7f6e",setting:"ip_geolocation",handOnClick:n("ip_geolocation"),content:"\u5305\u542b\u8bbf\u95ee\u8005\u4f4d\u7f6e\u7684\u56fd\u5bb6/\u5730\u533a\u4ee3\u7801\u548c\u6240\u6709\u53d1\u9001\u5230\u60a8\u7f51\u7ad9\u7684\u8bf7\u6c42\u3002<br /><strong>\u6ce8\u610f\uff1a</strong>\u60a8\u5fc5\u987b\u4ece CF-IPCountry HTTP \u6807\u5934\u51cf\u68c0\u7d22 IP \u5730\u7406\u4f4d\u7f6e\u4fe1\u606f\u3002"}];return l.a.createElement(L.a,{direction:"vertical",style:{width:"100%"}},c.map((function(e){return l.a.createElement(J,{loading:r,title:e.title,setting:t[e.setting],handOnClick:e.handOnClick,key:e.setting},e.content)})))};var Ce=function(){var e=Object(a.useContext)(Z),t=e.zone_settings,n=e.exchangeStatus,r=e.loading,c=[{title:"\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u6df7\u6dc6\u6280\u672f",setting:"email_obfuscation",handOnClick:n("email_obfuscation"),content:"\u5728\u60a8\u7684\u7f51\u7ad9\u4e0a\u663e\u793a\u7ecf\u8fc7\u6a21\u7cca\u5904\u7406\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\uff0c\u4ee5\u9632\u6b62\u673a\u81ea\u52a8\u7a0b\u5e8f\u548c\u5783\u573e\u90ae\u4ef6\u5236\u9020\u8005\u83b7\u53d6\u8be5\u5730\u5740\uff0c\u800c\u5bf9\u4e8e\u4eba\u7c7b\u8bbf\u95ee\u8005\uff0c\u5219\u4e0d\u4f1a\u5bf9\u5730\u5740\u8fdb\u884c\u4efb\u4f55\u53ef\u89c1\u66f4\u6539\u3002"},{title:"\u670d\u52a1\u5668\u7aef\u6392\u9664",setting:"server_side_exclude",handOnClick:n("server_side_exclude"),content:"\u81ea\u52a8\u9690\u85cf\u7279\u5b9a\u5185\u5bb9\u4ee5\u9632\u58f0\u8a89\u4e0d\u597d\u7684\u8bbf\u95ee\u8005\u67e5\u770b"},{title:"Hotlink \u4fdd\u62a4",setting:"hotlink_protection",handOnClick:n("hotlink_protection"),content:"\u9632\u6b62\u7ad9\u5916\u94fe\u63a5\u6307\u5411\u60a8\u7684\u56fe\u50cf\u3002"}];return l.a.createElement(L.a,{direction:"vertical",style:{width:"100%"}},c.map((function(e){return l.a.createElement(J,{loading:r,title:e.title,setting:t[e.setting],handOnClick:e.handOnClick,key:e.setting},e.content)})))},ze=W.a.TabPane,je=[{title:"Zones",link:"/user/zones"},{title:"Control"}],xe=function(e){var t=[{title:"\u6982\u89c8",key:"Overview",content:l.a.createElement(Y,null)},{title:"SSL-TLS",key:"SslTls",content:l.a.createElement(fe,null)},{title:"\u9632\u706b\u5899",key:"firewall",content:l.a.createElement(be,null)},{title:"\u7f13\u5b58",key:"Cache",content:l.a.createElement(_e,null)},{title:"\u9875\u9762\u89c4\u5219",key:"Pagerules",content:l.a.createElement(Te,null)},{title:"\u7f51\u7edc",key:"Network",content:l.a.createElement(Oe,null)},{title:"\u5185\u5bb9\u4fdd\u62a4",key:"ScrapeShield",content:l.a.createElement(Ce,null)}],n=Object(a.useState)({}),r=Object(P.a)(n,2),c=r[0],o=r[1],i=Object(a.useState)(!0),s=Object(P.a)(i,2),u=s[0],d=s[1],m=e.match.params.zone_id;Object(a.useEffect)((function(){(function(e){return T.get("/get_all_zone_settings",{zone_id:e})})(m).then((function(e){if(200===e.code){var t={};e.data.map((function(e){return t[e.id]=e})),o(t),d(!1)}else g.b.error(e.msg)}))}),[m]);var p=Object(a.useCallback)((function(e){return Object(V.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="on"===c[e].value?"off":"on",t.next=3,N(m,e,n).then((function(t){200===t.code?(g.b.success("\u5207\u6362\u6210\u529f"),c[e].value=n,o(Object.assign({},c))):g.b.info(t.msg)}));case 3:case"end":return t.stop()}}),t)})))}),[c,m]),E={zone_id:m,zone_settings:c,exchangeStatus:p,loading:u};return l.a.createElement(Z.Provider,{value:E},l.a.createElement(j,{path:je}),l.a.createElement(W.a,{defaultActiveKey:"Overview",centered:!0},t.map((function(e){return l.a.createElement(ze,{tab:e.title,key:e.key},l.a.createElement("div",{style:{paddingBottom:"2rem"}},e.content))}))))},we={labelCol:{span:3,sm:{span:5},lg:{span:3}},wrapperCol:{span:12,sm:{span:15},lg:{span:12}}},He={wrapperCol:{offset:3,span:12,xs:{offset:0,span:15},sm:{offset:5,span:15},lg:{offset:3,span:12}}},Pe=[{title:"Zones",link:"/user/zones"},{title:"Create"}],Ie=function(e){return l.a.createElement("div",null,l.a.createElement(j,{path:Pe}),l.a.createElement(m.a,Object.assign({},we,{name:"basic",onFinish:function(t){var n;g.b.loading({content:"loading...",key:"loading",duration:0}),(n=t.zone_name,T.post("/do_zone_create",{zone_name:n})).then((function(t){200===t.code?(g.b.success({content:"\u6dfb\u52a0\u57df\u540d\u6210\u529f",key:"loading"}),e.history.push("/user/zones")):g.b.error({content:"\u6dfb\u52a0\u57df\u540d\u5931\u8d25",key:"loading"})}))},onFinishFailed:function(e){console.log("Failed:",e)}}),l.a.createElement(m.a.Item,{label:"Zone Name",name:"zone_name",rules:[{required:!0,message:"Please input your Zone Name!"}]},l.a.createElement(p.a,null)),l.a.createElement(m.a.Item,He,l.a.createElement(u.a,{type:"primary",htmlType:"submit",block:!0},"Submit"))))},Ne=(n(412),n(222)),Re=(n(414),n(423));var Le=function(e){var t=Object(a.useState)(!1),n=Object(P.a)(t,2),r=n[0],c=n[1],i=[e.zone_id,e.record,e.index,[e.dnsrecords.dnsrecords,e.dnsrecords.setDnsrecords]],s=i[0],d=i[1],m=i[2],p=Object(P.a)(i[3],2),E=p[0],f=p[1];return l.a.createElement(L.a,{size:"middle"},l.a.createElement(u.a,{type:"dashed",className:"cdn "+(!0===d.proxied?"active":""),icon:l.a.createElement(Re.a,null),onClick:function(){d.proxied=!d.proxied,g.b.loading({content:"Loading...",key:"loading",duration:0}),I(s,d.id,d).then((function(e){200===e.code?(f(Object(A.a)(E)),g.b.success({content:"\u66f4\u65b0\u6210\u529f",key:"loading"})):g.b.error({content:e.msg,key:"loading"})}))}}),l.a.createElement(o.b,{to:"/user/zone/"+d.zone_id+"/dnsrecord/"+d.id+"/edit"},l.a.createElement(u.a,null,"Manage")),l.a.createElement(u.a,{type:"dashed",danger:!0,loading:r,onClick:function(){c(!0),g.b.loading({content:"Loading...",key:"loading",duration:0}),function(e,t){return T.del("/do_dns_record_delete",{zone_id:e,dns_record_id:t})}(s,d.id).then((function(e){c(!1),200===e.code?(E.splice(m,1),f(Object(A.a)(E)),g.b.success({content:"\u5220\u9664\u6210\u529f",key:"loading"})):g.b.error({content:e.msg,key:"loading"})}))}},"Delete"))},Ae=[{title:"Zones",link:"/user/zones"},{title:"DNSRecords"}],Ue=function(e){var t=Object(a.useState)([]),n=Object(P.a)(t,2),r=n[0],c=n[1],o=e.match.params,i=Object(a.useState)(!0),s=Object(P.a)(i,2),d=s[0],m=s[1],p=Object(a.useMemo)((function(){return[{title:"Record Type",dataIndex:"type",key:"type"},{title:"Host Name",dataIndex:"name",key:"name"},{title:"Content",dataIndex:"content",key:"content"},{title:"TTL",dataIndex:"ttl",key:"ttl"},{title:"Operation",key:"operation",render:function(e,t,n){return l.a.createElement(Le,{zone_id:o.zone_id,record:t,dnsrecords:{dnsrecords:r,setDnsrecords:c},index:n})}}]}),[r,o.zone_id]);return Object(a.useEffect)((function(){var e;(e=o.zone_id,T.get("/get_dns_records",{zone_id:e})).then((function(e){m(!1),200===e.code?c(e.data):g.b.error(e.msg)}))}),[o.zone_id]),l.a.createElement("div",null,l.a.createElement(j,{path:Ae}),l.a.createElement(u.a,{onClick:function(){e.history.push("/user/zone/"+o.zone_id+"/dnsrecord/create")},type:"primary"},"Add a Dnsrecord"),l.a.createElement(Ne.a,null),l.a.createElement(w.a,{columns:p,dataSource:r,loading:d,rowKey:function(e){return e.id}}))},De=(n(200),n(139)),Me=q.a.Option,Fe={labelCol:{span:3,sm:{span:5},lg:{span:3}},wrapperCol:{span:12,sm:{span:15},lg:{span:12}}},Be={wrapperCol:{offset:3,span:12,xs:{offset:0,span:15},sm:{offset:5,span:15},lg:{offset:3,span:12}}},Ve={type:"CNAME",ttl:1,proxied:!0},We=function(e){var t=e.match.params,n=Object(a.useState)(!0),r=Object(P.a)(n,2),c=r[0],o=r[1],i=Object(a.useCallback)((function(){return void 0===t.dns_record_id}),[t]),s=Object(a.useMemo)((function(){return l.a.createRef()}),[]);Object(a.useEffect)((function(){var e,n;i()?o(!1):(g.b.loading("loading...",0),(e=t.zone_id,n=t.dns_record_id,T.get("/get_dns_record_info",{zone_id:e,dns_record_id:n})).then((function(e){if(200===e.code){var t=e.data;s.current.setFieldsValue(t)}else g.b.error("\u52a0\u8f7ddns\u8bb0\u5f55\u5931\u8d25")})).finally((function(){g.b.destroy(),o(!1)})))}),[t,s,i]);var d=[{title:"Zones",link:"/user/zones"},{title:"DNSRecord",link:"/user/zone/"+t.zone_id+"/dnsrecord"},{title:i()?"Create":"Edit"}];return l.a.createElement("div",null,l.a.createElement(j,{path:d}),l.a.createElement(De.a,{delay:100,spinning:c,tip:"Loading..."},l.a.createElement(m.a,Object.assign({},Fe,{name:"basic",onFinish:function(n){var a,l;g.b.loading("loading...",0),o(!0),i()?(a=t.zone_id,l=n,T.post("/do_dns_record_create",{name:l.name,type:l.type,content:l.content,proxied:l.proxied,ttl:l.ttl},{zone_id:a})).then((function(n){g.b.destroy(),200===n.code?(g.b.success("\u6dfb\u52a0\u8bb0\u5f55\u6210\u529f"),e.history.push("/user/zone/"+t.zone_id+"/dnsrecord")):g.b.error(n.msg)})).finally((function(){g.b.destroy(),o(!1)})):I(t.zone_id,t.dns_record_id,n).then((function(e){200===e.code?g.b.success("\u66f4\u65b0\u8bb0\u5f55\u6210\u529f"):g.b.error(e.msg)})).finally((function(){g.b.destroy(),o(!1)}))},onFinishFailed:function(e){console.log("Failed:",e)},initialValues:Ve,ref:s}),l.a.createElement(m.a.Item,{label:"Record Name",name:"name",rules:[{required:!0,message:"Please input your Record Name!"}]},l.a.createElement(p.a,null)),l.a.createElement(m.a.Item,{label:"Record Type",name:"type",rules:[{required:!0,message:"Please input your Record Type!"}]},l.a.createElement(q.a,{style:{width:170}},l.a.createElement(Me,{value:"A"},"A"),l.a.createElement(Me,{value:"AAAA"},"AAAA"),l.a.createElement(Me,{value:"CNAME"},"CNAME"),l.a.createElement(Me,{value:"TXT"},"TXT"),l.a.createElement(Me,{value:"SRV"},"SRV"),l.a.createElement(Me,{value:"LOC"},"LOC"),l.a.createElement(Me,{value:"MX"},"MX"),l.a.createElement(Me,{value:"NS"},"NS"),l.a.createElement(Me,{value:"SPF"},"SPF"),l.a.createElement(Me,{value:"CERT"},"CERT"),l.a.createElement(Me,{value:"DNSKEY"},"DNSKEY"),l.a.createElement(Me,{value:"DS"},"DS"),l.a.createElement(Me,{value:"NAPTR"},"NAPTR"),l.a.createElement(Me,{value:"SMIMEA"},"SMIMEA"),l.a.createElement(Me,{value:"SSHFP"},"SSHFP"),l.a.createElement(Me,{value:"TLSA"},"TLSA"),l.a.createElement(Me,{value:"URI"},"URI"))),l.a.createElement(m.a.Item,{label:"Record Content",name:"content",rules:[{required:!0,message:"Please input your Record Content!"}]},l.a.createElement(p.a.TextArea,null)),l.a.createElement(m.a.Item,{label:"TTL",name:"ttl",rules:[{required:!0,message:"Please input your TTL!"}],valuePropName:"value"},l.a.createElement(q.a,{style:{width:170}},l.a.createElement(Me,{value:1},"Automatic"),l.a.createElement(Me,{value:120},"2 mins"),l.a.createElement(Me,{value:300},"5 mins"),l.a.createElement(Me,{value:600},"10 mins"),l.a.createElement(Me,{value:900},"15 mins"),l.a.createElement(Me,{value:1800},"30 mins"),l.a.createElement(Me,{value:3600},"1 hour"),l.a.createElement(Me,{value:7200},"2 hours"),l.a.createElement(Me,{value:18e3},"5 hours"),l.a.createElement(Me,{value:43200},"12 hours"),l.a.createElement(Me,{value:86400},"1 day"))),l.a.createElement(m.a.Item,{label:"CDN",name:"proxied",rules:[{required:!0,message:"Please input your CDN!"}],valuePropName:"checked"},l.a.createElement(oe.a,null)),l.a.createElement(m.a.Item,Be,l.a.createElement(u.a,{type:"primary",htmlType:"submit",block:!0},"Submit")))))},Ze=[{path:"/login",component:O},{path:"/404",component:C}],qe=[{path:"/user/dashboard",component:x,exact:!0,title:"\u63a7\u5236\u53f0"},{path:"/user/zones",component:M,exact:!0,title:"\u57df\u540d\u7ba1\u7406"},{path:"/user/zone/control/:zone_id",component:xe,exact:!0,title:"\u57df\u540d\u63a7\u5236"},{path:"/user/zone/create",component:Ie,exact:!0,title:"\u57df\u540d\u6dfb\u52a0"},{path:"/user/zone/:zone_id/dnsrecord",component:Ue,exact:!0,title:"DNS\u8bb0\u5f55\u7ba1\u7406"},{path:"/user/zone/:zone_id/dnsrecord/:dns_record_id/edit",component:We,exact:!0,title:"DNS\u8bb0\u5f55\u4fee\u6539"},{path:"/user/zone/:zone_id/dnsrecord/create",component:We,title:"DNS\u8bb0\u5f55\u6dfb\u52a0",exact:!0}],Ke=(n(161),n(97)),Ge=(n(198),n(44)),Je=(n(415),n(103)),Xe=n(424),Qe=n(425),Ye=n(426),$e=n(427),et=n(428),tt=n(429),nt=(n(417),Je.a.Header),at=Je.a.Sider,lt=Je.a.Content,rt=Ge.a.SubMenu,ct=[{icon:l.a.createElement(Xe.a,null),title:"\u63a7\u5236\u53f0",link:"/user/dashboard"},{icon:l.a.createElement(Qe.a,null),title:"\u57df\u540d\u7ba1\u7406",data:[{title:"\u57df\u540d\u5217\u8868",link:"/user/zones"},{title:"\u6dfb\u52a0\u57df\u540d",link:"/user/zone/create"}]},{icon:l.a.createElement(Ye.a,null),title:"\u8bbf\u95eeHidove",link:"https://www.hidove.cn",isUrl:!0},{icon:l.a.createElement(Ye.a,null),title:"\u8bbf\u95eeCloudflare",link:"https://www.cloudflare.com",isUrl:!0}],ot=function(e){var t=Object(i.g)(),n=Object(a.useState)(!1),r=Object(P.a)(n,2),c=r[0],s=r[1];return l.a.createElement(Je.a,null,l.a.createElement(at,{trigger:null,collapsible:!0,collapsed:c,breakpoint:"md",collapsedWidth:"0",onBreakpoint:function(e){e&&s(!0)}},l.a.createElement("div",{className:"logo"},l.a.createElement(o.b,{to:"/"},"Hidove")),l.a.createElement(Ge.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"]},ct.map((function(e,t){return Array.isArray(e.data)&&0!==e.data.length?l.a.createElement(rt,{key:t,icon:e.icon,title:e.title},e.data.map((function(e,t){return!0===e.isUrl?l.a.createElement(Ge.a.Item,{key:e.link},l.a.createElement("a",{target:"_blank",href:e.link,rel:"noopener noreferrer"},e.title)):l.a.createElement(Ge.a.Item,{key:e.link},l.a.createElement(o.b,{to:e.link},e.title))}))):!0===e.isUrl?l.a.createElement(Ge.a.Item,{key:t,icon:e.icon},l.a.createElement("a",{target:"_blank",href:e.link,rel:"noopener noreferrer"},e.title)):l.a.createElement(Ge.a.Item,{key:t,icon:e.icon},l.a.createElement(o.b,{to:e.link},e.title))})))),l.a.createElement(Je.a,{className:"site-layout"},l.a.createElement(nt,{className:"site-layout-background",style:{padding:0}},l.a.createElement(c?$e.a:et.a,{className:"trigger",onClick:function(){s(!c)}}),l.a.createElement(Ke.a,{className:"use-dropdown",overlay:l.a.createElement(Ge.a,null,l.a.createElement(Ge.a.Item,{onClick:function(){localStorage.clear(),t.push("/login")}},"\u9000\u51fa\u767b\u5f55"))},l.a.createElement("span",null,localStorage.getItem("username")," ",l.a.createElement(tt.a,null)))),l.a.createElement(lt,{className:"site-layout-background",style:{margin:"24px 16px",padding:24,minHeight:"80%"}},e.children)))};n(418);var it=function(){return y()?l.a.createElement(ot,null,l.a.createElement(i.d,null,qe.map((function(e){return l.a.createElement(i.b,{key:e.path,path:e.path,exact:e.exact,render:function(t){return console.log(t),l.a.createElement(e.component,t)}})})),l.a.createElement(i.a,{to:qe[0].path,from:"/user"}),l.a.createElement(i.a,{to:"/404"}))):l.a.createElement(i.a,{to:"/login"})};c.a.render(l.a.createElement(o.a,null,l.a.createElement(i.d,null,l.a.createElement(i.b,{path:"/user",render:function(e){return l.a.createElement(it,e)}}),Ze.map((function(e){return l.a.createElement(i.b,Object.assign({key:e.path},e))})),l.a.createElement(i.a,{to:"/user",from:"/"}),l.a.createElement(i.a,{to:"/404"}))),document.getElementById("root"))}},[[224,1,2]]]);
//# sourceMappingURL=main.405e745c.chunk.js.map